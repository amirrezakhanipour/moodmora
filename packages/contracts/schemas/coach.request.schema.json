{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "moodmora://schemas/coach.request.schema.json",
  "title": "CoachRequest",
  "type": "object",
  "additionalProperties": false,
  "required": ["user_message"],
  "properties": {
    "goal_text": { "type": "string", "minLength": 1, "maxLength": 6000 },
    "situation_text": { "type": "string", "minLength": 1, "maxLength": 12000 },
    "user_message": { "type": "string", "minLength": 1, "maxLength": 12000 },

    "chat_history": {
      "type": "array",
      "maxItems": 16,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["role", "content"],
        "properties": {
          "role": { "type": "string", "enum": ["user", "assistant"] },
          "content": { "type": "string", "minLength": 1, "maxLength": 12000 }
        }
      }
    },

    "context_extracted_text": { "type": "string", "minLength": 1, "maxLength": 24000 },

    "output_variant": { "type": "string", "enum": ["AUTO", "FA_SCRIPT", "FINGLISH", "EN"], "default": "AUTO" },

    "hard_mode_requested": { "type": "boolean", "default": false }
  }
}