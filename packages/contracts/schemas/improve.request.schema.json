{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "moodmora://schemas/improve.request.schema.json",
  "title": "ImproveRequest",
  "type": "object",
  "additionalProperties": false,
  "required": ["input"],
  "properties": {
    "input": {
      "type": "object",
      "additionalProperties": false,
      "required": ["draft_text"],
      "properties": {
        "draft_text": { "type": "string", "minLength": 1 },
        "context": { "type": "string" },
        "output_variant": { "type": "string", "enum": ["AUTO", "FA_SCRIPT", "FINGLISH", "EN"] },
        "hard_mode": { "type": "boolean" },
        "contact_id": { "type": "string" },

        "flirt_mode": { "type": "string", "enum": ["off", "subtle", "playful", "direct"] },
        "dating_stage": {
          "type": "string",
          "enum": ["first_msg", "early_chat", "planning", "reconnect", "post_date"]
        },
        "dating_vibe": { "type": "string", "enum": ["fun", "classy", "direct", "shy", "friendly"] }
      }
    },

    "voice": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": { "type": "boolean" },
        "variant": { "type": "string", "enum": ["AUTO", "FA_SCRIPT", "FINGLISH", "EN"] },
        "profile": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "warmth": { "type": "number", "minimum": 0, "maximum": 1 },
            "directness": { "type": "number", "minimum": 0, "maximum": 1 },
            "brevity": { "type": "number", "minimum": 0, "maximum": 1 },
            "formality": { "type": "number", "minimum": 0, "maximum": 1 },
            "emoji_rate": { "type": "number", "minimum": 0, "maximum": 1 },
            "do_not_use": { "type": "array", "items": { "type": "string", "minLength": 1 }, "maxItems": 50 }
          }
        }
      }
    }
  }
}
